this is the first version
takes input from command line
multi-thread is not working properly so it is temporarily removed